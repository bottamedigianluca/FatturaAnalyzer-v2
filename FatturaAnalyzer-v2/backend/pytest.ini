[pytest]
# Aggiunge la directory root del progetto (la cartella 'backend') al sys.path.
# Questo è il fix principale per l'errore "ModuleNotFoundError: No module named 'app'".
python_paths = .

# Specifica a pytest dove cercare i test, per ottimizzare la scoperta.
testpaths = tests

# Registra i markers personalizzati per evitare warning e abilitare filtri (es. pytest -m api).
# Ho dedotto questi marker dalla struttura dei tuoi test e dallo script test_runner.py.
markers =
    api: Test che interagiscono con gli endpoint API.
    database: Test che interagiscono direttamente con il database.
    integration: Test di integrazione tra più componenti (es. E2E).
    slow: Test lenti (es. performance) che possono essere saltati durante lo sviluppo rapido.
    unit: Test unitari di singole funzioni/classi.

# Opzioni predefinite da passare a pytest ogni volta che viene eseguito.
# -v: verbose, mostra più dettagli per ogni test.
# --strict-markers: fallisce se un marker usato in un test non è registrato qui sopra.
# --tb=short: traceback più compatto in caso di errore.
addopts = -v --strict-markers --tb=short

# Ignora i warning di deprecazione di PySide (se necessario, altrimenti commenta).
# filterwarnings =
#     ignore::DeprecationWarning
